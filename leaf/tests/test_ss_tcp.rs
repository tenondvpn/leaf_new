use protobuf::Message;
use tokio::io::{self};

use leaf::proto::server_config::ServerConfig;

#[tokio::test]
async fn test_write_server_conf2stream() -> io::Result<()> {
    let context = vec!
    [10, 128, 6, 44, 82, 192, 210, 224, 100, 28, 50, 93, 38, 17, 42, 254, 47, 158, 5, 161, 133, 79, 181, 170, 35, 116, 125, 94, 106, 45, 212, 42, 10, 140, 93, 85, 146, 95, 161, 53, 94, 18, 204, 158, 53, 66, 83, 145, 200, 183, 37, 254, 223, 131, 216, 49, 28, 13, 188, 105, 192, 76, 36, 116, 26, 159, 169, 226, 249, 159, 206, 167, 2, 166, 57, 16, 139, 110, 24, 129, 118, 161, 212, 148, 213, 124, 123, 232, 57, 194, 43, 52, 177, 25, 23, 255, 96, 21, 80, 169, 144, 23, 172, 3, 105, 199, 138, 188, 111, 94, 80, 143, 71, 235, 56, 21, 192, 156, 166, 147, 129, 187, 192, 95, 122, 150, 222, 119, 199, 211, 151, 61, 179, 125, 2, 226, 122, 145, 242, 16, 251, 134, 146, 81, 207, 21, 197, 224, 107, 182, 186, 128, 204, 229, 45, 58, 239, 174, 22, 136, 92, 121, 246, 107, 156, 44, 239, 89, 9, 164, 242, 99, 47, 42, 19, 102, 96, 169, 106, 173, 89, 26, 120, 68, 144, 2, 13, 104, 247, 62, 198, 27, 37, 29, 23, 54, 41, 73, 197, 223, 98, 15, 130, 141, 161, 86, 201, 20, 202, 17, 27, 225, 210, 146, 233, 149, 33, 186, 68, 9, 227, 146, 161, 173, 69, 78, 16, 137, 107, 170, 98, 50, 120, 123, 143, 196, 254, 47, 0, 155, 200, 89, 130, 176, 44, 113, 90, 105, 230, 96, 154, 223, 0, 252, 118, 2, 45, 166, 30, 13, 178, 19, 157, 203, 185, 213, 46, 239, 184, 141, 18, 43, 135, 162, 74, 110, 221, 167, 182, 199, 13, 252, 36, 98, 78, 169, 165, 202, 231, 142, 239, 248, 203, 65, 26, 43, 97, 29, 164, 100, 176, 58, 172, 103, 10, 2, 51, 18, 144, 8, 181, 194, 37, 189, 197, 125, 53, 64, 120, 199, 88, 182, 80, 192, 205, 194, 235, 70, 173, 252, 170, 128, 116, 78, 91, 123, 159, 156, 126, 227, 43, 205, 136, 69, 235, 241, 76, 78, 48, 7, 14, 131, 232, 31, 212, 181, 165, 10, 132, 96, 110, 233, 229, 25, 201, 219, 32, 211, 244, 129, 25, 50, 239, 204, 16, 199, 183, 113, 9, 52, 220, 144, 244, 87, 131, 214, 44, 114, 109, 222, 75, 28, 101, 226, 92, 140, 218, 27, 126, 1, 10, 92, 110, 78, 35, 79, 27, 168, 190, 55, 223, 120, 145, 87, 37, 63, 223, 16, 51, 118, 4, 97, 7, 171, 67, 21, 111, 93, 21, 42, 89, 213, 185, 82, 252, 99, 119, 145, 110, 69, 161, 215, 183, 59, 166, 65, 138, 121, 222, 118, 181, 121, 20, 2, 36, 194, 46, 9, 219, 176, 133, 89, 78, 57, 93, 37, 108, 6, 149, 87, 93, 171, 134, 222, 168, 106, 28, 42, 115, 89, 193, 160, 14, 157, 209, 237, 98, 225, 27, 162, 172, 150, 165, 184, 156, 138, 6, 164, 214, 144, 113, 121, 95, 62, 160, 243, 210, 245, 249, 47, 213, 244, 134, 43, 34, 116, 15, 77, 22, 31, 218, 101, 192, 3, 35, 222, 42, 126, 214, 88, 126, 250, 212, 166, 178, 12, 172, 170, 109, 226, 179, 197, 25, 35, 113, 116, 196, 240, 128, 167, 69, 199, 74, 158, 215, 82, 185, 224, 93, 247, 162, 132, 10, 58, 114, 22, 174, 121, 162, 67, 251, 10, 253, 136, 18, 237, 253, 221, 234, 187, 192, 236, 153, 238, 189, 139, 59, 135, 223, 113, 83, 5, 14, 84, 202, 51, 86, 107, 219, 196, 165, 111, 231, 205, 204, 139, 37, 187, 156, 153, 201, 196, 39, 58, 111, 144, 16, 159, 78, 99, 104, 5, 10, 239, 56, 60, 177, 191, 204, 33, 249, 162, 20, 31, 59, 166, 69, 202, 93, 253, 56, 30, 109, 56, 252, 11, 254, 64, 182, 254, 17, 115, 92, 159, 207, 174, 28, 150, 95, 6, 251, 159, 7, 126, 31, 190, 152, 138, 70, 247, 182, 130, 113, 11, 104, 193, 103, 215, 42, 207, 231, 174, 159, 17, 38, 112, 71, 221, 85, 27, 149, 234, 207, 126, 121, 115, 44, 59, 149, 245, 46, 165, 54, 177, 15, 35, 228, 241, 16, 36, 111, 238, 170, 115, 231, 74, 205, 176, 4, 37, 47, 58, 180, 68, 0, 63, 184, 51, 13, 77, 205, 124, 166, 195, 165, 101, 190, 102, 17, 132, 169, 112, 132, 62, 212, 64, 112, 80, 40, 181, 106, 146, 247, 119, 229, 28, 23, 60, 41, 145, 133, 205, 97, 1, 91, 216, 27, 187, 135, 71, 254, 18, 32, 227, 176, 196, 66, 152, 252, 28, 20, 154, 251, 244, 200, 153, 111, 185, 36, 39, 174, 65, 228, 100, 155, 147, 76, 164, 149, 153, 27, 120, 82, 184, 85, 34, 3, 105, 111, 115, 42, 5, 54, 46, 51, 46, 50, 50, 9, 111, 102, 102, 105, 99, 105, 97, 108, 108];
    let config1 = ServerConfig::parse_from_bytes(context.as_slice())?;
    let ver_str = format!("ios_6.3.2_officiall");
    let version_data: Vec<&str> = ver_str.split("-").collect();
    let string = format!("config1 is :{:?}", config1);
    println!("config1 is :{:?}", string);


    Ok(())


}

// Rest of your test code
